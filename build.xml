<?xml version="1.0" ?>
<project default="main">
	
	<!-- Edit these properties -->
	<property name="android-sdk-root" location="C:\AndroidSDK\android-sdk-windows"/>
	
	<!-- Properties you might want to touch. -->
	<property name="docs" location="javadocs"/>
	<property name="srcjarpostfix" value="-src" />
	<property name="jarfiles" location="jars"/>
	<property name="jarsrcfiles" location="jar-sources"/>
	

	<!-- Don't edit these properties. -->
	<property name="android-sdk-addon" location="${android-sdk-root}\add-ons"/>
	<property name="android-sdk-platform" location="${android-sdk-root}\platforms"/>
	
	
	<property name="android-sdk-8" location="${android-sdk-platform}\android-8"/>
	<property name="android-googleapi-8" location="${android-sdk-platform}\addon_google_apis_google_inc_8\libs"/>
	
	<target name="main" description="Beryl Project Deployment" depends="init">
		<antcall target="beryl-build">
			<param name="projectdir" value="beryl-core" />
			<param name="package" value="org.beryl" />
			<param name="classpathid" value="froyo-classpath" />
		</antcall>
		<antcall target="beryl-build">
			<param name="projectdir" value="beryl-app" />
			<param name="package" value="org.beryl.app" />
			<param name="classpathid" value="froyo-classpath" />
		</antcall>
		<antcall target="beryl-build">
			<param name="projectdir" value="beryl-content" />
			<param name="package" value="org.beryl.content" />
			<param name="classpathid" value="froyo-classpath" />
		</antcall>
		<antcall target="beryl-build">
			<param name="projectdir" value="beryl-diagnostics" />
			<param name="package" value="org.beryl.diagnostics" />
			<param name="classpathid" value="froyo-classpath" />
		</antcall>
		<antcall target="beryl-build">
			<param name="projectdir" value="beryl-location" />
			<param name="package" value="org.beryl.location" />
			<param name="classpathid" value="froyo-berylcore-classpath" />
		</antcall>
		<antcall target="beryl-build">
			<param name="projectdir" value="beryl-web" />
			<param name="package" value="org.beryl.web" />
			<param name="classpathid" value="froyo-classpath" />
		</antcall>
		<antcall target="beryl-build">
			<param name="projectdir" value="beryl-widget" />
			<param name="package" value="org.beryl.widget" />
			<param name="classpathid" value="froyo-classpath" />
		</antcall>
	</target>
	
	<target name="init" depends="jar-clean">
		<tstamp />
		
		<mkdir dir="${jarfiles}" />
		<mkdir dir="${jarsrcfiles}" />
		
		<!-- Later on create those directories -->
	</target>
	
	<target name="beryl-build" depends="java-jar">
		<echo message="projectdir=${projectdir} package=${package}"/>
	</target>
	
	<target name="java-compile-clean" description="Clean Project">
		<delete dir="${projectdir}/bin" />
	</target>
	
	<target name="java-compile" depends="java-compile-clean">
		<mkdir dir="${projectdir}/bin" />
		<javac srcdir="${projectdir}/src" destdir="${projectdir}/bin" classpathref="${classpathid}" />
	</target>
	
	<target name="java-jar-clean">
		<delete file="${jarfiles}/${package}.jar" />
		<delete file="${jarsrcfiles}/${package}${srcjarpostfix}.jar" />
	</target>
	
	<target name="java-jar" depends="java-compile,java-jar-clean">
		<jar jarfile="${jarfiles}/${package}.jar" basedir="${projectdir}/bin" includes="**/*.class" compress="true" />
	  	<jar jarfile="${jarsrcfiles}/${package}${srcjarpostfix}.jar" basedir="${projectdir}/src" includes="**/*" compress="true"  />
	</target>
	
	<target name="jar-clean">
		<delete dir="${jarfiles}" />
		<delete dir="${jarsrcfiles}" />
	</target>

	<!-- Class Paths -->
	<path id="froyo-classpath">
		<fileset dir="${android-sdk-8}">
			<include name="*.jar" />
		</fileset>
	</path>
	
	<path id="froyo-berylcore-classpath">
		<fileset dir="${android-sdk-8}">
			<include name="*.jar" />
		</fileset>
		<fileset dir="${jarfiles}">
			<include name="org.beryl.jar" />
		</fileset>
	</path>
	
	<path id="froyo-googleapi-classpath">
		<fileset dir="${android-sdk-8}">
			<include name="*.jar" />
		</fileset>
		<fileset dir="${android-googleapi-8}">
			<include name="*.jar" />
		</fileset>
	</path>
</project>